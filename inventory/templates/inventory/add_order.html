{% extends "inventory/base.html" %}
{% load static %}
{% block title %}Dodaj Zamówienie{% endblock %}

{% block content %}
<h1 class="page-title mb-4">Dodaj Zamówienie</h1>
<form method="post" novalidate>
    {% csrf_token %}

    <!-- Szczegóły Zamówienia -->
    <fieldset class="mb-4">
        <legend>Szczegóły Zamówienia</legend>
        {{ form.as_p }}
    </fieldset>

    <!-- Pozycje Zamówienia -->
    <fieldset>
        <legend>Pozycje Zamówienia</legend>
        {{ formset.management_form }}
        <table class="table table-bordered" id="order-items-table">
            <thead>
                <tr>
                    <th>Produkt</th>
                    <th>Ilość</th>
                    <th>Cena jednostkowa</th>
                    <th>Usuń</th>
                </tr>
            </thead>
            <tbody>
                {% for form in formset %}
                    <tr class="order-item-form">
                        <td>{{ form.oit_itmid }}</td>
                        <td>{{ form.oit_quantity }}</td>
                        <td>{{ form.oit_price }}</td>
                        <td>
                            {{ form.DELETE }}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
        <button type="button" class="btn btn-outline-secondary" id="add-item-btn">
            <i class="bi bi-plus-circle"></i> Dodaj Pozycję
        </button>
    </fieldset>

    <!-- Przyciski akcji -->
    <div class="d-flex justify-content-between mt-4">
        <a href="{% url 'order_list' %}" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left-circle"></i> Powrót do listy
        </a>
        <button type="submit" class="btn btn-primary-custom">
            <i class="bi bi-save"></i> Zapisz Zamówienie
        </button>
    </div>
</form>


<script src="{% static 'inventory/add_order.js' %}"></script>
{% endblock %}

